<!DOCTYPE html>
<html>
	<head>
		<meta charset = "UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
		<title>Calendário de Eventos</title>
		<script src="js/jquery-3.5.1.min.js" type="text/javascript"></script>
		<script src="js/bootstrap.min.js"></script>
		<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript">
		
			var eventos=[];
			
			$(document).ready(function(){
			
				var i;//Contador
				
				function limpar(){
					$("#form_add").hide();
					$("#form_edit").hide();
					$("#form_del").hide();
					$("#table").html("");
					$("#editform").html("");
				};
				
				$("#form_add").hide();
				$("#form_edit").hide();
				$("#form_del").hide();
				$("#table").hide();
				
				$("#list").click(function(){ //mostra o list e esconde os outras abas
					limpar();
					$("#table").show();
					$("#table").html("<table class='table table-light table-bordered' id='tabela'><tr><th>Evento</th><th>Hora de início</th><th>Hora de Término</th><th>Descrição</th></tr></table>");
					for(i=0; i<eventos.length; i++){
						$("#tabela").append("<tr><td>"+eventos[i][0]+"</td><td>"+eventos[i][1]+"</td><td>"+eventos[i][2]+"</td><td>"+eventos[i][3]+"</td></tr>");
					};
				});
				
				$("#add").click(function(){ //mostra o add e esconde os outras abas
					limpar();
					$("#form_add").show();
					$("#add_evento").click(function(){ //Adicionar evento
						var evento=[];
						var n=0;
						arguments[0]=($("#cod_evento").val());
						arguments[1]=($("#hora_inicio").val());
						arguments[2]=($("#hora_termino").val());
						arguments[3]=($("#descriçao").val()); 
						evento=[arguments[0], arguments[1], arguments[2], arguments[3]];
						for(i=0; i<eventos.length; i++){//laço for para verificar se o evento já está cadastrado
							if(evento[0] == eventos[i][0] && evento[1] == eventos[i][1] && evento[2] == eventos[i][2] && evento[3] == eventos[i][3]){
								n=1;
							}
						}
						if(n>0){//Alerta simples para evento já cadastrado
							alert("Evento já cadastrado!");
						}
						else{//Adiciona o novo cadastro no vetor eventos
							eventos.push(evento);
							alert("Cadastrado!");
						}
					}); //Fim do adicionar
				});
				
				
				$("#edit").click(function(){ //mostra o edit e esconde os outras abas
					limpar();
					$("#form_edit").show();
					$("#edit_evento").click(function(){//função de editar
						var busca=($("#cod_edit").val());
						var n=0;
						for(i=0; i<eventos.length; i++){
							if(busca==eventos[i][0]){//compara o codigo de busca com o codigo do evento
								$("#editform").html('<form action="/action_page.php"><div class="form-group"><label for="inicioedit">Hora de início</label><input type="time" class="form-control" id="inicioedit"><label for="terminoedit">Hora de término</label><input type="time" class="form-control" id="terminoedit"><label for="descriçaoedit">Descrição</label><textarea type="text" class="form-control" rows="4" placeholder="Descrição" id="descriçaoedit"></textarea></div><button type="button" class="btn btn-dark" id="editar">Alterar</button></form>');
								n=1;
								$("#editar").click(function(){
									var evento=[];
									arguments[0]=busca;
									arguments[1]=($("#inicioedit").val());
									arguments[2]=($("#terminoedit").val());
									arguments[3]=($("#descriçaoedit").val());
									evento=[arguments[0], arguments[1], arguments[2], arguments[3]];
									eventos[i-2]=evento;
									alert("Evento alterado!");
								});
							}
						}
						if(n<1){
							alert("Evento não encontrado!");
						}
					});
				});
				
				$("#remove").click(function(){ //mostra o del e esconde os outras abas
					limpar();
					$("#form_del").show();
					$("#del_evento").click(function(){//função remover
						var busca=($("#cod_del").val());
						var n=0;
						for(i=0; i<eventos.length; i++){
							if(busca==eventos[i][0]){
								n=1;
								if(eventos.length==1){
									eventos.pop();
								}
								else{
									eventos.splice(i,i);
								}
								alert("Evento excluído!");
							}
						}
						if(n<1){
							alert("Evento não encontrado!");
						}
					});
				});
			});
		</script>
	</head>
	<body class="jumbotron bg-light">
		<div class="jumbotron text-center" style="margin-bottom:0">
			<h1 class="display-1">Calendário de Eventos</h1>
		</div>
		
		<nav class="sticky-top">
			<ul class="nav nav-tabs justify-content-center bg-dark text-white">
				<li class="nav-item">
					<a class="nav-link border border-dark border-bottom-0 bg-dark text-white" data-toggle="tab" id="list">Listar Eventos</a>
				</li>
				<li class="nav-item">
					<a class="nav-link border border-dark border-bottom-0 bg-dark text-white" data-toggle="tab" id="add">Adicionar Evento</a>
				</li>
				<li class="nav-item">
					<a class="nav-link border border-dark border-bottom-0 bg-dark text-white" data-toggle="tab" id="edit">Editar Evento</a>
				</li>
				<li class="nav-item">
					<a class="nav-link border border-dark border-bottom-0 bg-dark text-white" data-toggle="tab" id="remove">Remover Evento</a>
				</li>
				<li class="nav-item">
					<a class="nav-link border border-dark text-white border-bottom-0 bg-dark text-white" href="pagina_inicial.html">Sair</a>
				</li>
			</ul>
		</nav>
		
		<div class="border border-dark rounded-bottom container bg-secondary text-black" style="max-width:620px">
			<form action="/action_page.php">
				<div id="form_add">
					<div class="form-group">
						<label for="cod_evento">Código do Evento</label>
						<input type="text" class="form-control" id="cod_evento">
						<label for="hora_inicio">Hora de início</label>
						<input type="time" class="form-control" id="hora_inicio">
						<label for="hora_termino">Hora de término</label>
						<input type="time" class="form-control" id="hora_termino">
						<label for="descriçao">Descrição</label>
						<textarea type="text" class="form-control" rows="4" placeholder="Descrição" id="descriçao"></textarea>
					</div>
					<button type="button" class="btn btn-dark" id="add_evento">Adicionar</button>
					<button type="reset" class="btn btn-dark">Limpar</button>
				</div>
				<div id="form_edit">
					<div class="list-group">
						<label for="cod_edit">Código do Evento</label>
						<input type="text" class="form-control" id="cod_edit">
					</div>
					<p></p>
					<button type="button" class="btn btn-dark" id="edit_evento">Buscar</button>
					<button type="reset" class="btn btn-dark">Limpar</button>
				</div>
				<div id="form_del">
					<div class="list-group">
						<label for="cod_del">Código do Evento</label>
						<input type="text" class="form-control" id="cod_del">
					</div>
					<p></p>
					<button type="button" class="btn btn-dark" id="del_evento">Buscar</button>
					<button type="reset" class="btn btn-dark">Limpar</button>
				</div>
				<div id="table">
				</div>
				<div id="editform">
				</div>
				<br>
			</form>
		</div>
		
		<div>
		</div>
	</body>
</html>